<div class="p-6 max-w-5xl mx-auto bg-white min-h-screen">
  
  <div class="flex items-center gap-4 mb-8">
    <div class="bg-indigo-600 text-white p-3 rounded-2xl shadow-lg shadow-indigo-200">
      <iconify-icon icon="tabler:address-book" width="32"></iconify-icon>
    </div>
    <div>
      <h2 class="text-3xl font-bold text-gray-800">Foglalásaim</h2>
      <p class="text-gray-500 mt-1">A hozzád tartozó ingatlanok összes foglalása és azok státusza.</p>
    </div>
  </div>

  @if (bookings.length === 0) {
    <div class="bg-gray-50 rounded-2xl p-16 text-center border border-dashed border-gray-300 shadow-sm">
      <div class="inline-flex items-center justify-center w-20 h-20 bg-white text-gray-400 rounded-full mb-4 shadow-sm">
        <iconify-icon icon="tabler:calendar-cancel" width="40"></iconify-icon>
      </div>
      <h3 class="text-xl font-bold text-gray-700">Még nincsenek foglalások</h3>
      <p class="text-gray-500">Amint egy vendég lefoglalja valamelyik ingatlanodat, az itt fog megjelenni.</p>
    </div>
  }

  <div class="space-y-4">
    @for (b of bookings; track b.id) {
      <div class="bg-white p-5 rounded-2xl shadow-sm border flex flex-col md:flex-row md:items-center justify-between gap-6 hover:shadow-md transition-all"
           [ngClass]="{
             'border-l-4 border-l-yellow-400 border-gray-100': b.status === BookingStatus.Pending,
             'border-l-4 border-l-green-500 border-gray-100': b.status === BookingStatus.Confirmed,
             'border-l-4 border-l-red-500 border-gray-100 opacity-75': b.status === BookingStatus.Cancelled
           }">

        <div class="flex items-start gap-4">
          
          <div class="mt-1 p-3 rounded-full flex-shrink-0"
               [ngClass]="{
                 'bg-yellow-50 text-yellow-600': b.status === BookingStatus.Pending,
                 'bg-green-50 text-green-600': b.status === BookingStatus.Confirmed,
                 'bg-red-50 text-red-600': b.status === BookingStatus.Cancelled
               }">
            <iconify-icon 
              [icon]="b.status === BookingStatus.Confirmed ? 'tabler:check' : (b.status === BookingStatus.Cancelled ? 'tabler:x' : 'tabler:clock')" 
              width="28">
            </iconify-icon>
          </div>

          <div>
            <div class="flex items-center gap-3 mb-2">
              <span class="text-sm font-bold text-gray-400">Foglalás #{{ b.id }}</span>
              
              <span class="text-[10px] font-bold px-2.5 py-0.5 rounded-full uppercase tracking-wide border"
                    [ngClass]="{
                      'bg-yellow-100 text-yellow-800 border-yellow-200': b.status === BookingStatus.Pending,
                      'bg-green-100 text-green-800 border-green-200': b.status === BookingStatus.Confirmed,
                      'bg-red-100 text-red-800 border-red-200': b.status === BookingStatus.Cancelled
                    }">
                {{ b.status === BookingStatus.Pending ? 'Függőben' : (b.status === BookingStatus.Confirmed ? 'Elfogadva' : 'Lemondva / Elutasítva') }}
              </span>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm text-gray-600 mt-2">
              <div class="flex items-center gap-2">
                <iconify-icon icon="tabler:building-estate" class="text-gray-400"></iconify-icon>
                <span>Ingatlan ID: <strong class="text-indigo-600">#{{ b.propertyId }}</strong></span>
              </div>
              <div class="flex items-center gap-2">
                <iconify-icon icon="tabler:user" class="text-gray-400"></iconify-icon>
                <span>Vendég ID: <strong>#{{ b.guestId }}</strong></span>
              </div>
              <div class="flex items-center gap-2 sm:col-span-2 bg-gray-50 p-2 rounded-lg mt-1 border border-gray-100">
                <iconify-icon icon="tabler:calendar-event" class="text-indigo-500"></iconify-icon>
                <span class="font-medium text-gray-800">
                  {{ b.startDate | date:'yyyy. MM. dd.' }} – {{ b.endDate | date:'yyyy. MM. dd.' }}
                </span>
              </div>
            </div>
          </div>
        </div>

        <div class="flex flex-col gap-2 w-full md:w-40 mt-4 md:mt-0 flex-shrink-0">
          @if (b.status === BookingStatus.Pending) {
            <button 
              (click)="confirm(b.id)" 
              class="w-full flex items-center justify-center gap-2 bg-green-50 hover:bg-green-100 text-green-700 px-4 py-2 rounded-xl font-bold transition-colors border border-green-200">
              <iconify-icon icon="tabler:check"></iconify-icon> Jóváhagyás
            </button>
          }
          @if (b.status !== BookingStatus.Cancelled) {
            <button 
              (click)="cancel(b.id)" 
              class="w-full flex items-center justify-center gap-2 bg-red-50 hover:bg-red-100 text-red-600 px-4 py-2 rounded-xl font-bold transition-colors border border-red-200">
              <iconify-icon icon="tabler:x"></iconify-icon> 
              {{ b.status === BookingStatus.Pending ? 'Elutasítás' : 'Lemondás' }}
            </button>
          }
        </div>

      </div>
    }
  </div>

</div>